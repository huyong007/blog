{"version":3,"sources":["../../src/controllers/page.js"],"names":["homePage","req","res","next","render","postsPage","title","createPage","editPage","id","query","showPage","PostModel","findOne","_id","err","post","mkContent","content","signupPage","signinPage","signout","clearCookie","config","cookieName","path","redirect"],"mappings":";;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA;AACO,IAAMA,8BAAW,SAAXA,QAAW,CAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAC9CD,QAAIE,MAAJ,CAAW,OAAX;AACH,CAFM;;AAIP;AACO,IAAMC,gCAAY,SAAZA,SAAY,CAAUJ,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAC/CD,QAAIE,MAAJ,CAAW,OAAX,EAAoB,EAAEE,OAAO,MAAT,EAApB;AACH,CAFM;;AAIP;AACO,IAAMC,kCAAa,SAAbA,UAAa,CAAUN,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAChDD,QAAIE,MAAJ,CAAW,QAAX;AACH,CAFM;;AAIP;AACO,IAAMI,8BAAW,SAAXA,QAAW,CAAUP,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAAA,QACtCM,EADsC,GAC/BR,IAAIS,KAD2B,CACtCD,EADsC;;;AAG9CP,QAAIE,MAAJ,CAAW,MAAX,EAAmB,EAAEK,MAAF,EAAnB;AACH,CAJM;;AAMP;AACO,IAAME,8BAAW,SAAXA,QAAW,CAAUV,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAAA,QACtCM,EADsC,GAC/BR,IAAIS,KAD2B,CACtCD,EADsC;;;AAG9CG,mBAAUC,OAAV,CAAkB,EAAEC,KAAKL,EAAP,EAAlB,EAA+B,UAAUM,GAAV,EAAeC,IAAf,EAAqB;AAChDA,aAAKC,SAAL,GAAiB,sBAAOD,KAAKE,OAAZ,CAAjB;AACAhB,YAAIE,MAAJ,CAAW,MAAX,EAAmB,EAAEY,UAAF,EAAnB;AACH,KAHD;AAIH,CAPM;;AASP;AACO,IAAMG,kCAAa,SAAbA,UAAa,CAAUlB,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAChDD,QAAIE,MAAJ,CAAW,QAAX;AACH,CAFM;;AAIP;AACO,IAAMgB,kCAAa,SAAbA,UAAa,CAAUnB,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAChDD,QAAIE,MAAJ,CAAW,QAAX;AACH,CAFM;;AAIP;AACO,IAAMiB,4BAAU,SAAVA,OAAU,CAAUpB,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAC7CD,QAAIoB,WAAJ,CAAgBC,iBAAOC,UAAvB,EAAmC,EAAEC,MAAM,GAAR,EAAnC;AACAvB,QAAIwB,QAAJ,CAAa,GAAb;AACH,CAHM","file":"page.js","sourcesContent":["import marked from 'marked';\r\nimport bcrypt from 'bcrypt';\r\nimport PostModel from '../models/post';\r\nimport config from '../config';\r\n\r\n/* GET home page. */\r\nexport const homePage = function (req, res, next) {\r\n    res.render('index');\r\n};\r\n\r\n/* GET posts page. */\r\nexport const postsPage = function (req, res, next) {\r\n    res.render('posts', { title: '我的文章' });\r\n};\r\n\r\n/* GET posts create page. */\r\nexport const createPage = function (req, res, next) {\r\n    res.render('create');\r\n};\r\n\r\n/* GET posts edit page. */\r\nexport const editPage = function (req, res, next) {\r\n    const { id } = req.query;\r\n\r\n    res.render('edit', { id });\r\n};\r\n\r\n/* GET posts show page. */\r\nexport const showPage = function (req, res, next) {\r\n    const { id } = req.query;\r\n\r\n    PostModel.findOne({ _id: id }, function (err, post) {\r\n        post.mkContent = marked(post.content);\r\n        res.render('show', { post });\r\n    });\r\n};\r\n\r\n/* GET signup page. */\r\nexport const signupPage = function (req, res, next) {\r\n    res.render('signup');\r\n};\r\n\r\n/* GET signin page. */\r\nexport const signinPage = function (req, res, next) {\r\n    res.render('signin');\r\n};\r\n\r\n/* GET signout */\r\nexport const signout = function (req, res, next) {\r\n    res.clearCookie(config.cookieName, { path: '/' });\r\n    res.redirect('/');\r\n};"]}