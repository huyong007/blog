{"version":3,"sources":["../../src/controllers/post.js"],"names":["more","req","res","next","PostModel","find","exec","then","json","postsList","posts","catch","create","body","title","content","post","authorId","locals","currentUser","_id","save","re","doc","one","id","params","findOne","edit","findOneAndUpdate","end"],"mappings":";;;;;;;AAAA;;;;AACA;;;;AACA;;;;;;AAKO,IAAMA,sBAAO,SAAPA,IAAO,CAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;;AAE1CC,mBAAUC,IAAV,CAAe,EAAf,EAAmB,EAAnB,EACKC,IADL,GAEKC,IAFL,CAEU,iBAAS;AACXL,YAAIM,IAAJ,CAAS,EAAEC,WAAWC,KAAb,EAAT;AACH,KAJL,EAKKC,KALL,CAKWR,IALX;AAOH,CATM;;AAWP;AACO,IAAMS,0BAAS,SAATA,MAAS,CAAUX,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAAA,oBACjBF,IAAIY,IADa;AAAA,QACpCC,KADoC,aACpCA,KADoC;AAAA,QAC7BC,OAD6B,aAC7BA,OAD6B;;;AAG5C,QAAMC,OAAO,IAAIZ,cAAJ,EAAb;AACAY,SAAKF,KAAL,GAAaA,KAAb;AACAE,SAAKD,OAAL,GAAeA,OAAf;AACAC,SAAKC,QAAL,GAAgBf,IAAIgB,MAAJ,CAAWC,WAAX,CAAuBC,GAAvC;AACAJ,SACKK,IADL,GAEKd,IAFL,CAEU,eAAO;AACTe,WAAGd,IAAH,CAAQ,EAAEQ,MAAMO,GAAR,EAAR;AACH,KAJL,EAKKZ,KALL,CAKWR,IALX;AAMH,CAbM;;AAeA,IAAMqB,oBAAM,SAANA,GAAM,CAAUvB,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AACzC,QAAMsB,KAAKxB,IAAIyB,MAAJ,CAAWD,EAAtB;;AAEArB,mBAAUuB,OAAV,CAAkB,EAAEP,KAAKK,EAAP,EAAlB,EACKnB,IADL,GAEKC,IAFL,CAEU,gBAAQ;AACVL,YAAIM,IAAJ,CAAS,EAAEQ,UAAF,EAAT;AACH,KAJL,EAKKL,KALL;AAMA;AACH,CAVM;;AAYA,IAAMiB,sBAAO,SAAPA,IAAO,CAAU3B,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAAA,sBACXF,IAAIyB,MADO;AAAA,QAClCD,EADkC,eAClCA,EADkC;AAAA,QAC9BX,KAD8B,eAC9BA,KAD8B;AAAA,QACvBC,OADuB,eACvBA,OADuB;;;AAG1CX,mBAAUyB,gBAAV,CAA2B,EAAET,KAAKK,EAAP,EAA3B,EAAwC,EAAEX,YAAF,EAASC,gBAAT,EAAxC,EACKT,IADL,GAEKC,IAFL,CAEU,YAAM;AACRL,YAAI4B,GAAJ;AACH,KAJL,EAKKnB,KALL,CAKWR,IALX;AAMH,CATM","file":"post.js","sourcesContent":["import PostModel from '../models/post';\r\nimport UserModel from '../models/user';\r\nimport config from '../config';\r\n\r\n\r\n\r\n\r\nexport const more = function (req, res, next) {\r\n\r\n    PostModel.find({}, {})\r\n        .exec()\r\n        .then(posts => {\r\n            res.json({ postsList: posts });\r\n        })\r\n        .catch(next);\r\n\r\n};\r\n\r\n/* POST create post */\r\nexport const create = function (req, res, next) {\r\n    const { title, content } = req.body;\r\n\r\n    const post = new PostModel();\r\n    post.title = title;\r\n    post.content = content;\r\n    post.authorId = res.locals.currentUser._id;\r\n    post\r\n        .save()\r\n        .then(doc => {\r\n            re.json({ post: doc });\r\n        })\r\n        .catch(next);\r\n};\r\n\r\nexport const one = function (req, res, next) {\r\n    const id = req.params.id;\r\n\r\n    PostModel.findOne({ _id: id })\r\n        .exec()\r\n        .then(post => {\r\n            res.json({ post });\r\n        })\r\n        .catch();\r\n    ;\r\n};\r\n\r\nexport const edit = function (req, res, next) {\r\n    const { id, title, content } = req.params;\r\n\r\n    PostModel.findOneAndUpdate({ _id: id }, { title, content })\r\n        .exec()\r\n        .then(() => {\r\n            res.end();\r\n        })\r\n        .catch(next);\r\n};"]}